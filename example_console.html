<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/xdoc/example_console.xml.vm at 2024-05-18 10:42

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>scala-maven-plugin &#x2013; Example</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="./" id="bannerLeft">scala-maven-plugin
</a><a href="http://www.scala-lang.org/" id="bannerRight"><img src="images/logos/scala.svg"  alt="Scala-lang" width="30" height="49"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2024-05-18 10:42</span>
           | <span id="projectVersion">Version: 4.9.2-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="wiki" title="Wiki">Wiki</a> |
<a href="wiki/frequently-asked-questions" title="FAQ">FAQ</a> |
<a href="http://groups.google.com/group/maven-and-scala" class="externalLink" title="Mailing-list">Mailing-list</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Overview</h5>
    <ul>
     <li class="none"><a href="index.html" title="Introduction">Introduction</a></li>
     <li class="none"><a href="plugin-info.html" title="Goals">Goals</a></li>
     <li class="none"><a href="usage.html" title="Usage">Usage</a></li>
     <li class="none"><a href="faq.html" title="FAQ">FAQ</a></li>
    </ul>
       <h5>Examples</h5>
    <ul>
     <li class="none"><a href="example_compile.html" title="Compiling">Compiling</a></li>
     <li class="none"><a href="example_incremental.html" title="Incremental Compile">Incremental Compile</a></li>
     <li class="none"><a href="example_cc.html" title="Continuous Compilation">Continuous Compilation</a></li>
     <li class="none"><a href="example_cctest.html" title="Continuous Testing">Continuous Testing</a></li>
     <li class="none"><a href="example_doc.html" title="Scaladoc">Scaladoc</a></li>
     <li class="none"><a href="example_run.html" title="Running">Running</a></li>
     <li class="none"><a href="example_script.html" title="Scripting">Scripting</a></li>
     <li class="none"><strong>Scala Console</strong></li>
     <li class="none"><a href="example_java.html" title="Mixed Java/Scala Projects">Mixed Java/Scala Projects</a></li>
     <li class="none"><a href="example_scalac_plugins.html" title="Creating Scalac Plugins">Creating Scalac Plugins</a></li>
     <li class="none"><a href="articles.html" title="Articles...">Articles...</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
    </ul>
      <a href="http://maven.apache.org" title="Build with Maven" class="poweredBy">
        <img class="poweredBy"  alt="Build with Maven" src="http://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">

  
    <h1>Running a scala console</h1>

    <section>
<h2><a name="Running"></a>Running</h2>
      
<p>
        You can start a console with a classpath set with the project dependencies (compile, test, runtime) and compiler classes (main and test):
        </p>
<ol style="list-style-type: decimal">
        
<li>compile your code (running the console doesn't force to compile:
          
<div class="source">
<pre>mvn test-compile #or mvn test</pre></div>
        </li>
        
<li>run the console :
          
<div class="source">
<pre>mvn scala:console</pre></div>
        </li>
        
<li>when the scala prompt is shown, play :
      
<div class="source">
<pre>
...
[INFO] [scala:console]
Welcome to Scala version 2.6.0-final.
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt; print(&quot;hello&quot;)
hello
scala&gt; new bootstrap.liftweb.Boot().boot
...
      </pre></div>
        </li>
        </ol>
      
    </section>

    <section>
<h2><a name="pre.2Fpost_action"></a>pre/post action</h2>
    
<p>If you want to always run some code before use the console or after use it, and don't want to type it at every startup. Then you could wrap the console into a scala main().</p>
    
<p>I'll show an example with the LiftConsole. A good pratice is to put this class in the test directory (it's not part of the main code ;) )</p>
    
<ol style="list-style-type: decimal">
    
<li>add into the pom.xml the jar with the scala 's console
    
<div class="source">
<pre>
      &lt;dependency&gt;
        &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;
        &lt;artifactId&gt;scala-compiler&lt;/artifactId&gt;
        &lt;version&gt;${scala.version}&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
      &lt;/dependency&gt;
      </pre></div>
     </li>
    
<li>create the scala file src/test/scala/LiftConsole.scala (based on liftrepl)
    
<div class="source">
<pre>
import bootstrap.liftweb.Boot
import scala.tools.nsc.MainGenericRunner

object LiftConsole {
   def main(args : Array[String]) {
     // Instantiate your project's Boot file
     val b = new Boot();
     // Boot your project
     b.boot;
     // Now run the MainGenericRunner to get your repl
     MainGenericRunner.main(args)
     // After the repl exits, then exit the scala script
     exit(0)
   }
}
      </pre></div>
     </li>
     
<li>compile: 
<div class="source">
<pre>mvn test</pre></div></li>
     
<li>run : 
<div class="source">
<pre>mvn scala:console -DmainConsole=LiftConsole</pre></div></li>
     
<li>if you don't want to always need to set &quot;-DmainConsole=LiftConsole&quot;,
      then edit your pom.xml and add to the configuration of the plugin :
    
<div class="source">
<pre>
      &lt;plugin&gt;
        &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;
        &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;4.9.2-SNAPSHOT&lt;/version&gt;
        &lt;configuration&gt;
          &lt;mainConsole&gt;LiftConsole&lt;/mainConsole&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      </pre></div>
      </li>
  </ol>

    </section>

    <section>
<h2><a name="running_with_JavaRebel"></a>running with JavaRebel</h2>
    
<p>If you want to run the console with <a href="">JavaRebel</a>, you need :
     </p>
<ol style="list-style-type: decimal">
     
<li>install javarebel somewhere on your disk, javarebel is available on a public maven repository (commercial tool)</li>
     
<li>call the console with the option define where is the javarebel.jar:
       
<div class="source">
<pre>mvn scala:console -Djavarebel.jar.path=[path_of_javarebel.jar]</pre></div>
       or through the pom.xml
    
<div class="source">
<pre>
      &lt;plugin&gt;
        &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;
        &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;4.9.2-SNAPSHOT&lt;/version&gt;
        &lt;configuration&gt;
          &lt;javaRebelPath&gt;${user.home}/lib/java/javarebel/javarebel.jar&lt;/javaRebelPath&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      </pre></div>
    </li>
    
<li><b>NOTE</b> - Forking is currently disabled in the plugin due to cross-platform issues with jline and process indirection.
        If you wish to use JRebel with the console, please set your maven opts in your environment:
        
<div class="source">
<pre>MAVEN_OPTS=&quot;$MAVEN_OPTS -noverify -javaagent:/...path/to/jrebel.jar&quot; mvn scala:console</pre></div>
    </li>
    </ol>
    
    </section>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2012&#x2013;2024..      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
